<div class="main-wrapper">
  <app-menu></app-menu>

  <div class="page-wrapper bg-wrapper">
    <div class="content">

      <div class="container spin-container">
        <!-- Heading -->
        <div class="text-center mb-4">
          <h3 class="fw-bold text-primary">Spin & Win</h3>
          <p class="text-muted">Try your luck and win exciting rewards!</p>
        </div>

        <!-- Show wheel only when spincount > 0 -->
        <div *ngIf="pfdata?.spincount > 0; else noSpins">
          <div class="spin-wheel-section">
              <!-- Pointer Arrow -->
              <div class="pointer"></div>

              <!-- Spin Wheel -->
              <div class="spin-wheel" #wheel>
                <div class="segment" *ngFor="let prize of prizes; let i = index" 
                    [style.transform]="'rotate(' + (i * 45) + 'deg)'"
                    [style.background]="segmentColors[i]">
                  <div class="segment-text">${{ prize }}</div>
                </div>
              </div>

              <!-- Spin Button -->
              <div class="spin-btn-wrapper">
                <button class="spin-btn" (click)="spin()" [disabled]="spinning">
                  <i class="bi bi-arrow-repeat me-2"></i> Spin Now
                </button>
              </div>
            </div>

        </div>

        <!-- Remaining Spins -->
        <div class="text-center mt-5">
          <span class="badge bg-info fs-6">
            Remaining Spins: {{ pfdata?.spincount }}
          </span>
        </div>

        <!-- When no spins are available -->
        <ng-template #noSpins>
          <div class="text-center">
            <h4 class="text-danger fw-bold">No Spins Available</h4>
            <p class="text-muted">You have used all your spins.</p>
          </div>
        </ng-template>
      </div>

      <!-- Success Modal -->
      <div class="modal fade" #successModal tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-body text-center">
              <div class="success-animation">
                <i class="bi bi-gift-fill text-success fs-1"></i>
              </div>
              <h4 class="mt-3 text-success">Congratulations!</h4>
              <p class="fw-bold text-dark">
                You won <span class="text-primary">${{ earnedAmount }}</span> ðŸŽ‰
              </p>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
