<app-menu-bar></app-menu-bar>

<div class="page-wrapper bg-wrapper" >
    <div class="content" style="margin-top: -50px;">
    
        <div class="row">
            <div class="col-md-12 col-lg-12">
                <div class="row">
                    <div class="col-12">
                        <marquee direction="left" scrollAmount="5" style="background-color: brown; padding: 2px; border-radius: 15px;">
                             <span class="text-white" *ngFor="let nd of data2.news">{{nd.news_title}} - {{nd.news}} | </span>
                        </marquee>
                    </div>
                    <div class="col-md-6">
                        <div class="card db-widgets">
                            <div class="card-header pb-0">
                                <div class="media">
                                    <i class="fa fa-user mr-2"></i>
                                    <div class="media-body">
                                        <h5>Welcome to {{data2.profiledata[0].name}} </h5>
                                        <h6><span class="text-success">({{this.regid}})</span></h6>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body p-4">
                                <h6 class="text-success" *ngIf="data2.profiledata[0].topupstatus==='1'">Id Active <i class="fa fa-thumbs-up"></i> </h6>
                                 <h6 class="text-danger" *ngIf="data2.profiledata[0].topupstatus==='0'">Id In-Active</h6>
                                <!-- WhatsApp Share -->
                                    <h6 class="badge p-2" style="background-color: rgb(13, 220, 6); color: #fff; cursor: pointer;" (click)="shareWhatsApp(this.regid)">
                                    <i class="fab fa-whatsapp"></i> 
                                    </h6>

                                    <!-- Telegram Share -->
                                    <h6 class="badge p-2" style="background-color: #0088cc; color: #fff; cursor: pointer;" (click)="shareTelegram(this.regid)">
                                    <i class="fab fa-telegram-plane"></i> 
                                    </h6>

                                    <!-- Facebook Share -->
                                    <h6 class="badge p-2" style="background-color: #3b5998; color: #fff; cursor: pointer;" (click)="shareFacebook(this.regid)">
                                    <i class="fab fa-facebook-f"></i> 
                                    </h6>

                            </div>
                            <div class="text-primary pb-1">
                                <div class="col-12 text-center">
                                    <div (click)="copyValue('https://iconistar.net/auth-sponsorsignup/' + this.regid)" > https://iconistar.net/auth-sponsorsignup/{{this.regid}}
                                        <span class="text-suucess" style="cursor: pointer;color:red;"> Copy Link <i class="fa fa-copy"></i> </span> 
                                   </div>
                                </div>
                               
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="card db-widgets">
                            <div class="card-header pb-0">
                                <div class="media">
                                    
                                    <div class="media-body">
                                        <h5>Share Your Qr Code</h5>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body p-4">
                              <div class="col-12">
                                    <div *ngIf="qrImageUrl" #qrSection>
                                        <h6 class="text-center pt-2"> <img src="assets/logo.png" style="width: 50px; height: 50px;" alt=""> {{ data2.profiledata[0].name }} ({{ data2.profiledata[0].regid }})</h6>
                                        <div class="text-center">
                                        <img [src]="qrImageUrl" alt="QR Code" class="text-center" />
                                        </div>
                                        <p class="text-center p-2">Free Registration <span class="text-danger"><b>Get $1 Free</b></span></p>
                                    </div>

                                    <button *ngIf="qrImageUrl" class="btn btn-sm btn-danger mt-2" (click)="downloadQR()">
                                        Download QR <i class="fa fa-download"></i>
                                    </button>
                                </div>
                              
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-4">
                        <div class="card db-widgets">
                            <div class="card-header pb-0">
                                <div class="media">
                                    <h3><i class="fa fa-database text-primary mr-2"></i></h3>
                                    <div class="media-body">
                                        <h5>Active Packages</h5>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body p-4">
                                <div class="row">
                                    <div class="col-12" *ngIf="lowCreditMessage">
                                        <div class="text-center">
                                            {{ lowCreditMessage }}
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <h6 class="text-success" *ngIf="data2.profiledata[0].pack54 ==='0'">
                                            $54 Package: 
                                            <span class="badge badge-success">Not Activated</span>
                                            <span class="btn btn-sm btn-link" (click)="openConfirmModal('1', '$54 Package')">Activate</span>
                                        </h6>
                                        <h6 class="text-success" *ngIf="data2.profiledata[0].pack54 ==='1'">
                                            $54 Package: 
                                            <span class="badge badge-success">Active</span>
                                        </h6>
                                        </div>

                                        <div class="col-12">
                                        <h6 class="text-primary" *ngIf="data2.profiledata[0].pack306 ==='0'">
                                            $306 Package:  
                                            <span class="badge badge-primary">Not Activated</span>
                                            <span class="btn btn-sm btn-link" (click)="openConfirmModal('2', '$306 Package')">Activate</span>
                                        </h6>
                                        <h6 class="text-primary" *ngIf="data2.profiledata[0].pack306 ==='1'">
                                            $306 Package:  
                                            <span class="badge badge-primary">Active</span>
                                        </h6>
                                        </div>

                                        <div class="col-12">
                                        <h6 class="text-danger" *ngIf="data2.profiledata[0].pack45 ==='0'">
                                            $45 Package: 
                                            <span class="badge badge-danger">Not Activated</span>
                                            <span class="btn btn-sm btn-link" (click)="openConfirmModal('3', '$45 Package')">Activate</span>
                                        </h6>
                                        <h6 class="text-danger" *ngIf="data2.profiledata[0].pack45 ==='1'">
                                            $45 Package: 
                                            <span class="badge badge-danger">Active</span>
                                        </h6>
                                        </div>

                                </div>
                              
                            </div>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="card db-widgets">
                            <div class="card-header pb-0">
                                <div class="media">
                                    <img src="assets/img/bitcoin.png" class="mr-2" alt="Bitcoin">
                                    <div class="media-body">
                                        <h5>My Wallet</h5>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body p-4">
                                <div class="row">
                                    <div class="col-12">
                                        <h6 class="text-success">Activation Wallet: {{data2.profiledata[0].actwallet | currency:'USD':true:'1.0-1'}} </h6> 
                                    </div>
                                    <div class="col-12">
                                        <h6 class="text-primary">Main Wallet: {{data2.profiledata[0].walletamount | currency:'USD':true:'1.0-1'}}</h6> 
                                    </div>
                                </div>
                              
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-4">
                        <div class="card db-widgets">
                            <div class="card-header pb-0">
                                <div class="media">
                                    <img src="assets/img/ethereum.png" class="mr-2" alt="Bitcoin">
                                    <div class="media-body">
                                        <h5>Wallet</h5>
                                        <h6>{{data2.profiledata[0].walletamount | currency:'USD':true:'1.0-1' }}</h6>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body p-4">
                                <h6 class="text-success">Credit: {{data2.credit | currency:'USD':true:'1.0-1'}}</h6>
                                <h6 class="text-danger">Debit: {{data2.debit | currency:'USD':true:'1.0-1'}}</h6>
                                <div > <i class="fa fa-wallet"></i> </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="card db-widgets">
                            <div class="card-header pb-0">
                                <div class="media">
                                    <img src="assets/img/referrals.png" height="40px" alt="BitCoin">
                                    <div class="media-body">
                                        <h5>Referrals</h5>
                                        <h6>{{data2.sponsors}}</h6>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body p-4">
                                <h6 class="text-success">Active: {{data2.asponsors}}</h6>
                                <h6 class="text-danger">InActive: {{data2.isponsors}}</h6>
                                <!-- <div > <i class="fa fa-users"></i> </div> -->
                            </div>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="card db-widgets">
                            <div class="card-header pb-0">
                                <div class="media">
                                    <img src="assets/img/rfincome.png" height="40px" alt="BitCoin">
                                    <div class="media-body">
                                        <h5>Referral Income</h5>
                                        <!-- <h6>$250</h6> -->
                                    </div>
                                </div>
                            </div>
                            <div class="card-body p-4">
                                <!-- <h6 class="text-success">Today: $50</h6> -->
                                <h6 class="text-success">{{data2.referalincome | currency:'USD':true:'1.0-1' }}</h6>
                                <!-- <div > <i class="fa fa-users"></i> </div> -->
                            </div>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="card db-widgets">
                            <div class="card-header pb-0">
                                <div class="media">
                                    <img src="assets/img/rfclub.png" height="40px" alt="BitCoin">
                                    <div class="media-body">
                                        <h5>Referral Club Income</h5>
                                        <!-- <h6>$250</h6> -->
                                    </div>
                                </div>
                            </div>
                            <div class="card-body p-4">
                                <!-- <h6 class="text-success">Today: $50</h6> -->
                                <h6 class="text-danger">{{data2.referalclubincome | currency:'USD':true:'1.0-1' }}</h6>
                                <!-- <div > <i class="fa fa-users"></i> </div> -->
                            </div>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="card db-widgets">
                            <div class="card-header pb-0">
                                <div class="media">
                                    <img src="assets/img/level.png" height="40px" alt="BitCoin">
                                    <div class="media-body">
                                        <h5>Level Income</h5>
                                        <!-- <h6>$250</h6> -->
                                    </div>
                                </div>
                            </div>
                            <div class="card-body p-4">
                                <h6 class="text-success">{{data2.levelincome | currency:'USD':true:'1.0-1' }}</h6>
                                <!-- <h6 class="text-danger">Total: $200</h6> -->
                                <!-- <div > <i class="fa fa-users"></i> </div> -->
                            </div>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="card db-widgets">
                            <div class="card-header pb-0">
                                <div class="media">
                                     <h3><i class="fa fa-wallet mr-2"></i></h3>
                                    <div class="media-body">
                                        <h5>Auto-Pool Income</h5>
                                        <!-- <h6 class="text-success">Eligible</h6> -->
                                    </div>
                                </div>
                            </div>
                            <div class="card-body p-4">
                                <!-- <h6 class="text-success">Today: $50</h6> -->
                                <h6 class="text-danger">{{data2.autopoolincome | currency:'USD':true:'1.0-1' }}</h6>
                                <!-- <div > <i class="fa fa-users"></i> </div> -->
                            </div>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="card db-widgets">
                            <div class="card-header pb-0">
                                <div class="media">
                                    <img src="assets/img/royalty.png" height="40px" alt="BitCoin">
                                    <div class="media-body">
                                        <h5>Icon Royalty Income</h5>
                                        <h6 class="text-danger" *ngIf="data2.asponsors<12">Not Eligible</h6>
                                         <h6 class="text-success" *ngIf="data2.asponsors>=12">Eligible</h6>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body p-4">
                                  <h6 class="text-primary">{{data2.royaltycredit | currency:'USD':true:'1.0-1' }}</h6>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="row">

                    <div class="col-md-6 d-flex wlt">
                        <div class="card chart-card mb-0 flex-fill">
                            <div class="card-header">
                                <h2>Icon Rank Club Income</h2>                      
                            </div>

                            <div class="card-body pt-0">
                                <div class="wallet-sec">
                                    <div class="usd-sec">
                                        <div class="d-flex align-items-center justify-content-between">
                                            <!-- <h4>$159 001. 542</h4>
                                            <h4>$159 001. 542</h4> -->
                                        </div>
                                        <div class="d-flex align-items-center justify-content-between">
                                            <!-- <h5>Today Earn</h5>
                                            <h5>Total Earn</h5> -->
                                        </div>
                                    </div>

                                    <div class="table-responsive">
                                        <table>
                                            <tr>
                                                <td class="d-flex align-items-center">
                                                    <img src="assets/img/silverstar.png" alt="BitCoin">
                                                    <div>
                                                        <h5 class="text-success">Silver</h5>
                                                        <!-- <h6 class="text-success">Eligible</h6> -->
                                                         <!-- <h6 class="text-danger">Not Eligible</h6> -->
                                                    </div>
                                                </td>
                                                <td class="text-right">
                                                    <h4>Earning: {{data2.iconsilverincome | currency:'USD':true:'1.0-1'}}</h4>
                                                    <!-- <h6>Total: $58759.92</h6> -->
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="d-flex align-items-center">
                                                    <img src="assets/img/goldstar.png" alt="BitCoin">
                                                    <div>
                                                        <h5 class="text-warning">Gold </h5>
                                                        <!-- <h6 class="text-danger">Not Eligible</h6> -->
                                                    </div>
                                                </td>
                                                <td class="text-right">
                                                    <h4>Earning: {{data2.icongoldincome | currency:'USD':true:'1.0-1'}}</h4>
                                                    <!-- <h6>Total: $58759.92</h6> -->
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="d-flex align-items-center">
                                                    <img src="assets/img/diamondstar.png" alt="BitCoin">
                                                    <div>
                                                        <h5 class="text-danger">Diamond</h5>
                                                        <!-- <h6 class="text-danger">Not Eligible</h6> -->
                                                    </div>
                                                </td>
                                                <td class="text-right">
                                                    <h4>Earning: {{data2.icondiamondincome | currency:'USD':true:'1.0-1'}}</h4>
                                                    <!-- <h6>Total: $58759.92</h6> -->
                                                </td>
                                            </tr>
                                        </table>
                                    </div>                                    
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6 d-flex wlt mt-2">
                        <div class="card chart-card mb-0 flex-fill">
                            <div class="card-header">
                                <h2>Icon Rewards & Awards</h2>                      
                            </div>

                            <div class="card-body pt-0">
                                <div class="wallet-sec">
                                    <div class="table-responsive">
                                        <table>
                                            <tr>
                                                <td class="d-flex align-items-center">
                                                    <img src="assets/img/award.png" alt="BitCoin">
                                                    <div>
                                                        <h5 class="text-success">Award</h5>
                                                        <h6 class="text-success" > Reward <span ngbTooltip="{{ tooltipText }}">
                                                            <i class="fa fa-exclamation-circle"></i>
                                                          </span></h6>
                                                    </div>
                                                </td>
                                               <td class="text-right">
                                                <h4>Referrals: {{ data2?.asponsors }}</h4>

                                                <ng-container *ngIf="data2?.asponsors >= 12; else notEligible">
                                                    <h6 class="text-success">🎉 Award Eligible</h6>
                                                </ng-container>
                                                
                                                <ng-template #notEligible>
                                                    <h6 class="text-danger">12 Direct Referrals Needed</h6>
                                                </ng-template>
                                                </td>

                                            </tr>
                                            <tr>
                                                <td class="d-flex align-items-center">
                                                    <img src="assets/img/silver.png" alt="BitCoin">
                                                    <div>
                                                        <h5 class="text-info">Silver Rank</h5>
                                                        <h6 class="text-success" > Reward <span ngbTooltip="{{ silver }}">
                                                            <i class="fa fa-exclamation-circle"></i>
                                                          </span></h6>
                                                    </div>
                                                </td>
                                                <td class="text-right">
                                                    <h6 class="text-danger" *ngIf="acdata.iconsilverstatus==='0'">Not Eligible <span ngbTooltip="{{ silver1 }}">
                                                        <i class="fa fa-exclamation-circle"></i>
                                                      </span></h6>
                                                    <h6 class="text-success" *ngIf="acdata.iconsilverstatus==='1'"> Eligibile  <span ngbTooltip="{{ silver1 }}">
                                                        <i class="fa fa-exclamation-circle"></i>
                                                      </span></h6>
                                                       <h6 class="text-success" *ngIf="acdata.iconsilverstatus==='2'"> Award Received  <span ngbTooltip="{{ silver1 }}">
                                                        <i class="fa fa-exclamation-circle"></i>
                                                      </span></h6>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="d-flex align-items-center">
                                                    <img src="assets/img/gold.png" alt="BitCoin">
                                                    <div>
                                                        <h5 class="text-warning">Gold Rank</h5>
                                                        <h6 class="text-success" > Reward <span ngbTooltip="{{ gold }}">
                                                            <i class="fa fa-exclamation-circle"></i>
                                                          </span></h6>
                                                    </div>
                                                </td>
                                                <td class="text-right">
                                                     <h6 class="text-danger" *ngIf="acdata.icongoldstatus==='0'">Not Eligible <span ngbTooltip="{{ gold1 }}">
                                                        <i class="fa fa-exclamation-circle"></i>
                                                      </span></h6>
                                                    <h6 class="text-success" *ngIf="acdata.icongoldstatus==='1'"> Eligibile  <span ngbTooltip="{{ gold1 }}">
                                                        <i class="fa fa-exclamation-circle"></i>
                                                      </span></h6>
                                                       <h6 class="text-success" *ngIf="acdata.icongoldstatus==='2'"> Award Received  <span ngbTooltip="{{ gold1 }}">
                                                        <i class="fa fa-exclamation-circle"></i>
                                                      </span></h6>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="d-flex align-items-center">
                                                    <img src="assets/img/diamond.png" alt="BitCoin">
                                                    <div>
                                                        <h5 class="text-primary">Diamond Rank</h5>
                                                        <h6 class="text-success" > Reward <span ngbTooltip="{{ diamond }}">
                                                            <i class="fa fa-exclamation-circle"></i>
                                                          </span></h6>
                                                    </div>
                                                </td>
                                                <td class="text-right">
                                                     <h6 class="text-danger" *ngIf="acdata.icondiamondstatus==='0'">Not Eligible <span ngbTooltip="{{ diamond1 }}">
                                                        <i class="fa fa-exclamation-circle"></i>
                                                      </span></h6>
                                                    <h6 class="text-success" *ngIf="acdata.icondiamondstatus==='1'"> Eligibile  <span ngbTooltip="{{ diamond1 }}">
                                                        <i class="fa fa-exclamation-circle"></i>
                                                      </span></h6>
                                                       <h6 class="text-success" *ngIf="acdata.icondiamondstatus==='2'"> Award Received  <span ngbTooltip="{{ diamond1 }}">
                                                        <i class="fa fa-exclamation-circle"></i>
                                                      </span></h6>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>                                    
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

        </div>
        
        
      </div>
   </div>

<ng-template #confirmModal let-modal>
  <div class="modal-header">
    <h5 class="modal-title">Confirm Activation</h5>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <p><strong>RegID:</strong> {{ form.value.regid }}</p>
    <p><strong>Package:</strong> {{ selectedPackage.name }}</p>
      <p><strong>Availble Wallet:</strong> <span class="text-danger" style="font-weight: 700;">{{ data2.profiledata[0].actwallet | currency:'USD':true:'1.0-1' }}</span> </p>
    <p>Are you sure you want to activate this package?</p>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="modal.dismiss()">Cancel</button>
    <button type="button" class="btn btn-primary" (click)="confirmAction(modal)">Yes, Confirm</button>
  </div>
</ng-template>

<ng-template #activationModal let-modal>
  <div class="modal-header bg-success text-white position-relative">
    <h5 class="modal-title">
      <i class="fa fa-check-circle"></i> Activation Successful!
    </h5>
    <button type="button" class="close text-white" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
    <div class="fireworks-bg"></div>
  </div>

  <div class="modal-body text-center py-4">
    <img src="assets/logo1.png" alt="Logo" class="img-fluid mb-3" style="max-height:150px;" />
    <h4 class="text-success font-weight-bold">Your Package Is Activated!</h4>
      <p class="mb-2"><strong>Name:</strong> {{ udata?.rname }}</p>
    <p class="mb-2"><strong>User ID:</strong> {{ udata?.forid }}</p>
    <p class="mb-3"><strong>Package:</strong> {{ udata?.packagename }}</p>
    <p class="mb-3"><strong>Amount:</strong> {{ udata?.amount | currency:'USD':true:'1.0-1' }}</p>
    <p class="text-primary font-italic">
      Let’s start fulfilling your dream with <strong class="text-danger">Iconistar</strong> 🌟
    </p>
  </div>

  <div class="modal-footer justify-content-center">
    <button type="button" class="btn btn-success px-4" (click)="modal.close('Close click')">
      Let’s Go!
    </button>
  </div>
</ng-template>

