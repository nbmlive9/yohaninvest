<div class="main-wrapper">
  <app-menu></app-menu>

   <div class="page-wrapper bg-wrapper">
      <div class="content">

        <h5 class="text-center mb-4 fw-bold text-success">REGISTER</h5>
          
          <form [formGroup]="registerForm" (ngSubmit)="sign()">
            <div class="row g-3">
              <!-- Full Name -->
              <div class="col-sm-6">
                <label class="form-label">Full Name *</label>
                <div class="input-wrapper">
                  <input type="text" formControlName="name" placeholder="Enter Name" class="form-control" />
                </div>
                <div *ngIf="registerForm.get('name')?.touched && registerForm.get('name')?.invalid" class="text-danger small">
                  Name is required
                </div>
              </div>
          
              <!-- Email -->
              <div class="col-sm-6">
                <label class="form-label">Email *</label>
                <div class="input-wrapper">
                  <input type="email" formControlName="email" class="form-control" />
                </div>
                <div *ngIf="registerForm.get('email')?.touched && registerForm.get('email')?.invalid" class="text-danger small">
                  <span *ngIf="registerForm.get('email')?.errors?.['required']">Email is required</span>
                  <span *ngIf="registerForm.get('email')?.errors?.['email']">Invalid email format</span>
                </div>
              </div>
          
              <!-- Country -->
              <!-- <div class="col-sm-6">
                <label class="form-label">Country</label>
                <div class="input-wrapper">
                  <i class="fas fa-globe input-icon"></i>
                  <select formControlName="country" class="form-select">
                    <option value="" disabled selected>Select your country</option>
                    <option *ngFor="let country of countries" [value]="country">{{ country }}</option>
                  </select>
                </div>
                <div *ngIf="registerForm.get('country')?.touched && registerForm.get('country')?.invalid" class="text-danger small">
                  Country is required
                </div>
              </div> -->

              <!-- Password -->
        <!-- Password -->
<div class="col-sm-6 mb-3 position-relative">
  <label class="form-label">Password *</label>
  <input 
    [type]="showPassword ? 'text' : 'password'" 
    formControlName="password" 
    placeholder="********" 
    class="form-control pe-5" 
  />
  <i class="fa" 
     [ngClass]="showPassword ? 'fa-eye-slash' : 'fa-eye'" 
     (click)="showPassword = !showPassword"
     style="position: absolute; top: 70%; right: 15px; transform: translateY(-50%); cursor: pointer;">
  </i>
  <div *ngIf="registerForm.get('password')?.touched && registerForm.get('password')?.invalid" class="text-danger small mt-1">
    <span *ngIf="registerForm.get('password')?.errors?.['required']">Password is required.</span>
    <span *ngIf="registerForm.get('password')?.errors?.['minlength']">Password must be at least 6 characters.</span>
  </div>
</div>

<!-- Confirm Password -->
<div class="col-sm-6 mb-3 position-relative">
  <label class="form-label">Confirm Password *</label>
  <input 
    [type]="showConfirmPassword ? 'text' : 'password'" 
    formControlName="confirmPassword" 
    placeholder="********" 
    class="form-control pe-5" 
  />
  <i class="fa" 
     [ngClass]="showConfirmPassword ? 'fa-eye-slash' : 'fa-eye'" 
     (click)="showConfirmPassword = !showConfirmPassword"
     style="position: absolute; top: 70%; right: 15px; transform: translateY(-50%); cursor: pointer;">
  </i>

  <!-- Confirm Password Errors -->
  <div *ngIf="registerForm.get('confirmPassword')?.touched && registerForm.get('confirmPassword')?.invalid" class="text-danger small mt-1">
    <span *ngIf="registerForm.get('confirmPassword')?.errors?.['required']">Confirm Password is required.</span>
  </div>

  <!-- Password Mismatch -->
  <div *ngIf="registerForm.errors?.['mismatch'] && registerForm.get('confirmPassword')?.touched" class="text-danger small mt-1">
    Password and Confirm Password must match.
  </div>
</div>


          
              <!-- Referral ID -->
              <div class="col-sm-6">
                <label class="form-label">Referral ID</label>
                <div class="input-wrapper">
                  <input type="text" formControlName="sponcerid" class="form-control" [(ngModel)]="hpdata.regid" readonly />
                </div>
                <small class="text-success">Name: {{ hpdata.name }}</small>
              </div>
          
              <!-- Placement ID -->
              <div class="col-sm-6">
                <label class="form-label">Placement ID</label>
                <div class="input-wrapper">
                  <input type="text" formControlName="placementid" [(ngModel)]="this.regid" class="form-control" readonly />
                </div>
                <div class="text-success mt-1">
                  Name: {{ pffdata.name }}
                </div>
              </div>
          
              <!-- Position -->
              <div class="col-sm-6">
                <label class="form-label">Position</label>
                <div class="input-wrapper">
                  <input formControlName="position" class="form-control" [(ngModel)]="this.position" readonly />
                </div>
              </div>
            </div>
          
            <!-- Terms -->
            <div class="mt-3">
              <label>
                <input type="checkbox" formControlName="terms" />
                I have read and agree to
                <a href="#" data-bs-toggle="modal" data-bs-target="#termsModal">Terms & Conditions</a>
              </label>
              <div *ngIf="registerForm.get('terms')?.touched && registerForm.get('terms')?.invalid" class="text-danger small">
                You must accept the terms
              </div>
            </div>
          
            <button type="submit" class="btn btn-dark w-100 mt-3 rounded-pill" *ngIf="registerForm.valid">Sign Up</button>
          </form>

       </div>
   </div>

</div>

 <!-- Registration Success Modal -->
<div class="modal fade" id="registrationModal" tabindex="-1" aria-labelledby="registrationModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content border-0 shadow-lg rounded-4">
      <div class="modal-header bg-primary text-white border-0 rounded-top-4">
        <h5 class="modal-title" id="registrationModalLabel">Registration Successful âœ…</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body py-4 px-4">
        <p class="mb-3">Your registration was successful! Please find your login details below:</p>
        <ul class="list-group list-group-flush mb-3">
          <li class="list-group-item"><strong>Name:</strong> {{ udata?.Username }}</li>
          <!-- <li class="list-group-item"><strong>Email:</strong> {{ udata?.email }}</li> -->
          <li class="list-group-item"><strong>RegID:</strong> {{ udata?.Registerid }}</li>
          <li class="list-group-item"><strong>Password:</strong> {{ udata?.password }}</li>
          <li class="list-group-item"><strong>Sponsor:</strong> {{ udata?.Sponcerid }}</li>

        </ul>
        <p class="text-muted small">Thank you for joining our team! You can now use these details to log in.</p>
      </div>
      <div class="modal-footer border-0">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <!-- <a routerLink="/auth-login" class="btn btn-primary">Go to Login</a> -->
      </div>
    </div>
  </div>
</div>
