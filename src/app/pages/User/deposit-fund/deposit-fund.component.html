<div class="main-wrapper">
  <app-menu></app-menu>

    <div class="page-wrapper bg-wrapper">
        <div class="content">

            <div class="d-flex justify-content-end">
    <button class="btn btn-success btn-custom btn-deposit" data-bs-toggle="modal" data-bs-target="#addFundModal">
        Deposit Amount
    </button>
</div>

    <h4 class="fw-bold">Deposit Funds</h4>

 <div class="card table-responsive">
     <table class="table">
        <thead>
            <tr>           
                <th>S.No</th>
                <th>Date</th>
                <th>Amount</th>
                <th>Txn Id</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let row of ddata; let i=index;">
                <td><span class="transaction">{{i+1}}</span></td>
                <td> {{row.cdate | date:'dd/MM/YYYY'}} </td>
                <td><span class="value">{{row.amount | currency:'USD':true:'1.0-2' }}</span></td>
                <td>{{row.transno}}</td>
                <td>Success</td>
            </tr>
        </tbody>
    </table>
 </div>

<div class="modal fade" id="addFundModal" tabindex="-1" aria-labelledby="addFundModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="addFundModalLabel">Add Fund</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">

       <div >

 <form [formGroup]="form" (ngSubmit)="openConfirmModal()">
  <label for="amount">USDT Amount (BEP20 Only)*</label>
  <input id="amount" class="form-control" type="text" formControlName="amount" min="50"
    placeholder="Enter Amount" (input)="formatAmount($event)" />

  <div *ngIf="form.get('amount')?.invalid && form.get('amount')?.touched" class="text-danger">
    Amount is required and must be â‰¥ $50
  </div>
  <label for="amount">Yohan Coins</label>
    <input class="form-control" type="number" value="{{ calculatedCoins }}" />

  <!-- Show calculated Yohan coins -->
  <!-- <div *ngIf="calculatedCoins > 0" class="mt-2">
    Yohan Coins: <strong>{{ calculatedCoins | number:'1.0-6' }}</strong>
  </div> -->

  <button type="submit" class="btn btn-sm btn-danger mt-2" [disabled]="!form.valid">
    Submit
  </button>
</form>

</div>

</div>


      </div>
    </div>
  </div>






        </div>
    </div>


</div>

<!-- Confirm Modal -->
<div class="modal fade" id="confirmModal" #confirmModal tabindex="-1" aria-labelledby="confirmModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="confirmModalLabel">Confirm Deposit</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        You are depositing <strong>{{ form.value.amount }}</strong> USDT. <br />
        You will receive approx. <strong>{{ calculatedCoins | number:'1.0-6' }}</strong> Yohan Coins. <br />
        Do you want to continue?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-danger" (click)="confirmDeposit()">Confirm</button>
      </div>
    </div>
  </div>
</div>

