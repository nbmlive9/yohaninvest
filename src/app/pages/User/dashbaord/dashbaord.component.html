<div class="main-wrapper">
  <app-menu></app-menu>

  <div class="page-wrapper bg-light">
    <div class="content container-fluid py-4">

      <!-- Loader when fetching data -->
      <div *ngIf="loading" class="loader-wrapper d-flex flex-column justify-content-center align-items-center">
        <div class="spinner-border text-primary mb-3" style="width: 4rem; height: 4rem;" role="status"></div>
        <p class="text-muted fs-5">Loading Dashboard Data...</p>
      </div>

      <!-- Dashboard Content -->
      <div *ngIf="!loading">
        <!-- Welcome Header -->
        <div class="row mb-2">
          <div class="col-sm-12">
            <div class="welcome-header bg-primary text-white rounded-3 p-4 shadow-sm">
              <div class="row align-items-center">
                <div class="col-md-6">
                  <h4 class="mb-0">Welcome, <span class="fw-bold">{{ pfdata?.name }} ({{ pfdata?.regid }})</span></h4>
                </div>
                <div class="col-md-6 text-md-end mt-3 mt-md-0">
                  <h5 class="mb-0">
                    Main Wallet:
                    <span class="badge bg-warning text-dark fs-6">
                      {{ pfdata?.walletamount | currency:'USD':true:'1.0-2' }}
                    </span> <br>
                    Balance Business: {{ pfdata?.balance | currency:'USD':true:'1.0-2' }}
                  </h5>
                </div>
              </div>
            </div>
          </div>
        </div>

     

         <div class="row text-center g-1" >

                   <!-- Share Link Section -->
              <div class="col-12 col-md-6 col-lg-3 text-md-end">
                <div class="d-inline-block">
                  <h5 class="d-inline-block p-1" style="cursor: pointer;" (click)="toggleShare()">
                    <span class="share-btn">
                      Share Link <i class="fa fa-share-alt-square" aria-hidden="true"></i>
                    </span>
                  </h5>
                      <!-- Share Icons -->
                      <div *ngIf="showShareIcons" class="d-flex justify-content-md-end gap-3 mt-2 mb-3">
                        <a (click)="sharwahtsapp(pfdata?.regid)" target="_blank" title="WhatsApp">
                          <i class="fab fa-whatsapp fa-lg text-success"></i>
                        </a>
                        <a href="https://instagram.com" target="_blank" title="Instagram">
                          <i class="fab fa-instagram fa-lg text-danger"></i>
                        </a>
                        <a href="https://facebook.com" target="_blank" title="Facebook">
                          <i class="fab fa-facebook fa-lg text-primary"></i>
                        </a>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-6">
                     <div (click)="copyValue('https://yohaninv.live/yohan/auth-sponsorsignup/' + pfdata?.regid)" class="mt-2">
                        <p class="bg-warning p-2 text-white" style="border-radius: 15px; cursor: pointer;">
                          https://yohaninv.live/yohan/auth-sponsorsignup/{{pfdata?.regid}} 
                          <span class="text-danger fw-bold">Copy</span>
                        </p>
                      </div>

                      <!-- Show copied message -->
                      <div *ngIf="copied" class="text-success mt-2">
                        âœ… Copied!
                      </div>
                    </div>
                  
            <!-- Active Sponsors -->
           <div class="col-xl-3 col-md-6" *ngIf="pfdata.spincount != '0'" routerLink="/spinroll">
              <button class="btn btn-danger btn-sm blink-btn">
                Spin Now Earn Reward
               </button>
            </div>
            <div class="col-md-6">
               <button type="button" class="btn btn-success" *ngIf="pfdata?.regid == '115599'" routerLink="/cpdash">
                   Company Dashboard
              </button>
            </div>
          </div>

        <!-- Dashboard Stats -->
        <div class="row g-4">
          <!-- Active Sponsors -->
          <!-- <div class="col-xl-3 col-md-6">
            <div class="card custom-card card-blue">
              <div class="card-body text-center p-4">
                <img src="assets/img/icon/menu-icon-01.svg" alt="img">
                <h6>Active Sponsors</h6>
                <h3 class="fw-bold">{{ data1?.activesponsors }}</h3>
              </div>
            </div>
          </div> -->

          <!-- Total Sponsors -->
          <!-- <div class="col-xl-3 col-md-6">
            <div class="card custom-card card-green">
              <div class="card-body text-center p-4">
                <img src="assets/img/icon/menu-icon-03.svg" alt="img">
                <h6>Total Sponsors</h6>
                <h3 class="fw-bold">{{ data1?.sponsors }}</h3>
              </div>
            </div>
          </div> -->

          <!-- Left Sponsors -->
          <div class="col-xl-3 col-md-6">
            <div class="card custom-card card-green">
              <div class="card-body text-center p-4">
                <img src="assets/img/icon/menu-icon-02.svg" alt="img">
                <h6>Sponsors</h6>
                <h3 class="fw-bold">{{data1?.sponsors}} </h3>
                <p>Left: {{ data1?.leftsponsors }} | Right: {{ data1?.rightsponsors }}</p>
              </div>
            </div>
          </div>

          <!-- Right Sponsors -->
          <!-- <div class="col-xl-3 col-md-6">
            <div class="card custom-card card-yellow">
              <div class="card-body text-center p-4">
                <img src="assets/img/icon/menu-icon-11.svg" alt="img">
                <h6>Right Sponsors</h6>
                <h3 class="fw-bold"></h3>
              </div>
            </div>
          </div> -->

          <!-- Sponsor Income -->
          <div class="col-xl-3 col-md-6">
            <div class="card custom-card card-cyan">
              <div class="card-body text-center p-4">
              <img src="assets/img/icon/menu-icon-05.svg" alt="img">
                <h6>Sponsor Income</h6>
                <h3 class="fw-bold">{{ data1?.sponcerincome | currency:'USD':true:'1.0-2' }}</h3>
              </div>
            </div>
          </div>

           <div class="col-xl-3 col-md-6">
            <div class="card custom-card card-blue">
              <div class="card-body text-center p-4" routerLink="/roireport">
                 <img src="assets/img/icon/menu-icon-05.svg" alt="img">
                <h6>Total Invest</h6>
                <h3 class="fw-bold">{{ pfdata?.business | currency:'USD':true:'1.0-2' }}</h3>
                <p>Spin Reward: {{ totalSpinAmount | currency:'USD':true:'1.0-2'}}</p>
              </div>
            </div>
          </div>

          <!-- ROI Income -->
          <div class="col-xl-3 col-md-6">
            <div class="card custom-card card-purple">
              <div class="card-body text-center p-4">
                <img src="assets/img/icon/menu-icon-13.svg" alt="img">
                <h6>ROI Income</h6>
                <h3 class="fw-bold">{{ data1?.roiincome | currency:'USD':true:'1.0-2' }}</h3>
              </div>
            </div>
          </div>

           <!-- Total Matching -->
          <div class="col-xl-3 col-md-6">
            <div class="card custom-card card-orange">
              <div class="card-body text-center p-4">
                <img src="assets/img/icon/menu-icon-05.svg" alt="img">
                <h6>Total Matching</h6>
                <h3 class="fw-bold">{{ data1?.totalmatching }}</h3>
              </div>
            </div>
          </div>

             <div class="col-xl-3 col-md-6">
            <div class="card custom-card card-pink">
              <div class="card-body text-center p-4">
                 <img src="assets/img/icon/menu-icon-05.svg" alt="img">
                <h6>Business</h6>
                <p class="fw-bold">Left: {{ data1?.leftbusiness | currency:'USD':true:'1.0-2' }} - 
                  Right: {{ data1?.rightbusiness | currency:'USD':true:'1.0-2' }}
                </p>
              </div>
            </div>
          </div>

		    <!-- <div class="col-xl-3 col-md-6">
            <div class="card custom-card card-blue">
              <div class="card-body text-center p-4">
                 <img src="assets/img/icon/menu-icon-05.svg" alt="img">
                <h6>Left Count</h6>
                <h3 class="fw-bold">{{ data1?.leftcount }}</h3>
              </div>
            </div>
          </div> -->

          <!-- Right Count -->
          <!-- <div class="col-xl-3 col-md-6">
            <div class="card custom-card card-green">
              <div class="card-body text-center p-4">
                 <img src="assets/img/icon/menu-icon-05.svg" alt="img">
                <h6>Right Count</h6>
                <h3 class="fw-bold">{{ data1?.rightcount }}</h3>
              </div>
            </div>
          </div> -->

          <!-- Total Daily Matching -->
          <!-- <div class="col-xl-3 col-md-6">
            <div class="card custom-card card-orange">
              <div class="card-body text-center p-4">
                 <img src="assets/img/icon/menu-icon-05.svg" alt="img">
                <h6>Total Daily Matching</h6>
                <h3 class="fw-bold">{{ data1?.totaldailymatching }}</h3>
              </div>
            </div>
          </div> -->

          <!-- Total Instant Matching -->
          <!-- <div class="col-xl-3 col-md-6">
            <div class="card custom-card card-yellow">
              <div class="card-body text-center p-4">
                 <img src="assets/img/icon/menu-icon-05.svg" alt="img">
                <h6>Total Instant Matching</h6>
                <h3 class="fw-bold">{{ data1?.totalinstantmatching }}</h3>
              </div>
            </div>
          </div> -->

          <!-- Credit -->
          <div class="col-xl-3 col-md-6">
            <div class="card custom-card card-yellow">
              <div class="card-body text-center p-4">
                <img src="assets/img/icon/menu-icon-05.svg" alt="img">
                <h6>Credit</h6>
                <h3 class="fw-bold">{{ data1?.credit | currency:'USD':true:'1.0-2' }}</h3>
              </div>
            </div>
          </div>

          <!-- Debit -->
          <div class="col-xl-3 col-md-6">
            <div class="card custom-card card-red">
              <div class="card-body text-center p-4">
                 <img src="assets/img/icon/menu-icon-05.svg" alt="img">
                <h6>Debit</h6>
                <h3 class="fw-bold">{{ data1?.debit | currency:'USD':true:'1.0-2' }}</h3>
              </div>
            </div>
          </div>

          <!-- Paid -->
          <div class="col-xl-3 col-md-6">
            <div class="card custom-card card-cyan">
              <div class="card-body text-center p-4">
              <img src="assets/img/icon/menu-icon-05.svg" alt="img">
                <h6>Paid</h6>
                <h3 class="fw-bold">{{ data1?.paid | currency:'USD':true:'1.0-2' }}</h3>
              </div>
            </div>
          </div>

           <div class="col-xl-3 col-md-6">
            <div class="card custom-card card-green">
              <div class="card-body text-center p-4">
              <img src="assets/img/icon/menu-icon-05.svg" alt="img">
                <h6>Activation Wallet</h6>
                <h3 class="fw-bold">{{ pfdata?.actwallet | currency:'USD':true:'1.0-2' }}</h3>
                <p>Cash Wallet: {{ pfdata?.cashwallet | currency:'USD':true:'1.0-2' }}</p>
              </div>
            </div>
          </div>

         
        </div>
      </div> <!-- End Dashboard Content -->

    </div>
  </div>
</div>
